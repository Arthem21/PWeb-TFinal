@page "/comision"
@inject NavigationManager Navigation
@rendermode InteractiveServer
@inject Contexto Dc

<PageTitle>Comisión</PageTitle>

<h1>Comisión</h1>

<div class="text-end mb-3 mt-3">
    <button class="btn btn-primary" @onclick="Calcular">Calcular</button>
</div>
<div class="container border border-success rounded pt-3 pb-3 pl-3 pr-3">
<table class="table">
    <thead class="thead-light">
        <tr>
            <th scope="col">Costes</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var detention in ListaDetentions)
        {
            <tr>
                <td>@detention.Costes</td>
            </tr>
        }
    </tbody>
</table>
</div>
<br/>
<div class="mt-3">
    <p>10% de comision</p>
    <h4>Su comision Total es de: @TotalCostes $</h4>
</div>

@code {
    public List<Multa> ListaDetentions = new List<Multa>();
    private double TotalCostes { get; set; } = 0;

    private void Calcular()
    {
        double Costes = ListaDetentions.Sum(x => x.Costes);
        TotalCostes = Costes * 0.10;
    }

    

    
    protected override void OnInitialized()
    {
        ListaDetentions = Dc.multas.ToList();
    }
}
